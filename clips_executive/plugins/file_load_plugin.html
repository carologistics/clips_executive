<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>File Load Plugin &mdash; clips_executive 0.1.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=86f27845" />

  
  
        <script src="../_static/jquery.js?v=8dae8fb0"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=360bc84d"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Protobuf Plugin" href="protobuf_plugin.html" />
    <link rel="prev" title="YAML Configuration Plugin" href="config_plugin.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            clips_executive
          </a>
              <div class="version">
                0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">CLIPS Plugins</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#initialize">initialize()</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#clips-env-init">clips_env_init()</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#clips-env-destroyed">clips_env_destroyed()</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#finalize">finalize()</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#pitfalls-and-considerations">Pitfalls and Considerations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#available-plugins">Available Plugins</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cx_ament_index.html">Ament Index Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="executive_plugin.html">Continuous Execution Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="config_plugin.html">YAML Configuration Plugin</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">File Load Plugin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage-example">Usage Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="protobuf_plugin.html">Protobuf Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="ros_msgs_plugin.html">Generic ROS Msg Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="ros_param_plugin.html">ROS Param Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="tf2_pose_tracker_plugin.html">TF2 Pose Tracker Plugin</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plugin_generator/index.html">ROS Interface Plugin Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../standards.html">Standard Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../__readme_include.html">README</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">clips_executive</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">CLIPS Plugins</a></li>
      <li class="breadcrumb-item active">File Load Plugin</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/plugins/file_load_plugin.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="file-load-plugin">
<span id="usage-file-load-plugin"></span><h1>File Load Plugin<a class="headerlink" href="#file-load-plugin" title="Link to this heading"></a></h1>
<p>Source code on <a class="reference external" href="https://github.com/carologistics/clips-executive/blob/master/cx_plugins/file_load_plugin">GitHub</a>.</p>
<div class="admonition-plugin-class admonition">
<p class="admonition-title">Plugin Class</p>
<p>cx::FileLoadPlugin</p>
</div>
<p>This plugin provides the ability to load files into CLIPS using <code class="docutils literal notranslate"><span class="pre">batch*</span></code> and <code class="docutils literal notranslate"><span class="pre">load*</span></code> through configuration values.</p>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Link to this heading"></a></h2>
<dl class="field-list">
<dt class="field-odd"><cite>pkg_share_dirs</cite><span class="colon">:</span></dt>
<dd class="field-odd"><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Type</p></td>
<td><p>Default</p></td>
</tr>
<tr class="row-even"><td><p>string vector</p></td>
<td><p>[]</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>Description</dt><dd><p>When specifying relative paths, look at the share directories of the listed packages to resolve them (in the specified order).</p>
</dd>
</dl>
</dd>
<dt class="field-even"><cite>load</cite><span class="colon">:</span></dt>
<dd class="field-even"><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Type</p></td>
<td><p>Default</p></td>
</tr>
<tr class="row-even"><td><p>string vector</p></td>
<td><p>[]</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>Description</dt><dd><p>Specify files to load using CLIPS load* command when the plugin is loaded.
Supports absolute paths or relative paths using the share directories specified above.</p>
</dd>
</dl>
</dd>
<dt class="field-odd"><cite>batch</cite><span class="colon">:</span></dt>
<dd class="field-odd"><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Type</p></td>
<td><p>Default</p></td>
</tr>
<tr class="row-even"><td><p>string vector</p></td>
<td><p>[]</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>Description</dt><dd><p>Specify files to load using CLIPS batch* command when the plugin is loaded. This happens after the files specified in <code class="docutils literal notranslate"><span class="pre">load</span></code> are loaded.
Supports absolute paths or relative paths using the share directories specified above.</p>
</dd>
</dl>
</dd>
<dt class="field-even"><cite>cleanup_batch</cite><span class="colon">:</span></dt>
<dd class="field-even"><table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>Type</p></td>
<td><p>Default</p></td>
</tr>
<tr class="row-even"><td><p>string vector</p></td>
<td><p>[]</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>Description</dt><dd><p>Specify files to load using CLIPS batch* command when the plugin is unloaded.
This may be used to clean up all loaded content to gracefully undo whatever was loaded in before.
Supports absolute paths or relative paths using the share directories specified above.</p>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Link to this heading"></a></h2>
<p>This plugin injects the user-defined code into the CLIPS environments and has no other effects.</p>
<p>For the difference between <code class="docutils literal notranslate"><span class="pre">load*</span></code> and <code class="docutils literal notranslate"><span class="pre">batch*</span></code> please consult the CLIPS <a class="reference external" href="https://clipsrules.net/documentation/v641/bpg641.pdf">Basic Programming Guide (PDF)</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended to use load over batch whenever possible due to the superior error handling of load.
E.g., when using batch, a missing closing parenthesis <code class="docutils literal notranslate"><span class="pre">)</span></code>  may lead to a silent failure as CLIPS treats this as an uncompleted command and waits for another closing parenthesis to appear before actually processing the input.</p>
</div>
</section>
<section id="usage-example">
<h2>Usage Example<a class="headerlink" href="#usage-example" title="Link to this heading"></a></h2>
<p>A minimal working example is provided by the <a class="reference external" href="https://carologistics.github.io/clips-executive/cx_bringup">cx_bringup</a> package. Run it via:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2<span class="w"> </span>launch<span class="w"> </span>cx_bringup<span class="w"> </span>cx_launch.py<span class="w"> </span>manager_config:<span class="o">=</span>plugin_examples/file_load.yaml
</pre></div>
</div>
<section id="id1">
<h3>Configuration<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>File <a class="reference external" href="https://github.com/carologistics/clips-executive/blob/master/cx_bringup/params/plugin_examples/file_load.yaml">cx_bringup/params/plugin_examples/file_load.yaml</a>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">clips_manager</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ros__parameters</span><span class="p">:</span>
<span class="w">    </span><span class="nt">environments</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;cx_file_load&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">cx_file_load</span><span class="p">:</span>
<span class="w">      </span><span class="nt">plugins</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;files&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">watch</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;facts&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;rules&quot;</span><span class="p p-Indicator">]</span>

<span class="w">    </span><span class="nt">files</span><span class="p">:</span>
<span class="w">      </span><span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cx::FileLoadPlugin&quot;</span>
<span class="w">      </span><span class="nt">pkg_share_dirs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;cx_bringup&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">load</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;clips/plugin_examples/file-load.clp&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">batch</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;clips/plugin_examples/file-load-batch.clp&quot;</span><span class="p p-Indicator">]</span>
<span class="w">      </span><span class="nt">cleanup_batch</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;clips/plugin_examples/file-load-cleanup-batch.clp&quot;</span><span class="p p-Indicator">]</span>
</pre></div>
</div>
</section>
<section id="code">
<h3>Code<a class="headerlink" href="#code" title="Link to this heading"></a></h3>
<p>File <a class="reference external" href="https://github.com/carologistics/clips-executive/blob/master/cx_bringup/clips/plugin_examples/file-load.clp">cx_bringup/clips/plugin_examples/file-load.clp</a>.</p>
<div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nv">defrule</span><span class="w"> </span><span class="nv">hello-world</span>
<span class="w">   </span><span class="p">(</span><span class="nb">not</span><span class="w"> </span><span class="p">(</span><span class="nv">hello</span><span class="p">))</span>
<span class="w">   </span><span class="nv">=&gt;</span>
<span class="w">   </span><span class="p">(</span><span class="nv">printout</span><span class="w"> </span><span class="nv">green</span><span class="w"> </span><span class="s">&quot;Hello world&quot;</span><span class="w"> </span><span class="nv">crlf</span><span class="p">)</span>
<span class="w">   </span><span class="p">(</span><span class="nb">assert</span><span class="w"> </span><span class="p">(</span><span class="nv">hello</span><span class="p">))</span>
<span class="p">)</span>
<span class="p">(</span><span class="nv">defrule</span><span class="w"> </span><span class="nv">goodbye-world</span>
<span class="w">   </span><span class="p">(</span><span class="nv">executive-finalize</span><span class="p">)</span>
<span class="w">   </span><span class="nv">=&gt;</span>
<span class="w">   </span><span class="p">(</span><span class="nv">printout</span><span class="w"> </span><span class="nv">blue</span><span class="w"> </span><span class="s">&quot;Goodbye world&quot;</span><span class="w"> </span><span class="nv">crlf</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>File <a class="reference external" href="https://github.com/carologistics/clips-executive/blob/master/cx_bringup/clips/plugin_examples/file-load-batch.clp">cx_bringup/clips/plugin_examples/file-load-batch.clp</a>.</p>
<div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nv">printout</span><span class="w"> </span><span class="nv">yellow</span><span class="w"> </span><span class="s">&quot;batch&quot;</span><span class="w"> </span><span class="nv">crlf</span><span class="p">)</span>
</pre></div>
</div>
<p>File <a class="reference external" href="https://github.com/carologistics/clips-executive/blob/master/cx_bringup/clips/plugin_examples/file-load-cleanup-batch.clp">cx_bringup/clips/plugin_examples/file-load-cleanup-batch.clp</a>.</p>
<div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="c1">; file-load-cleanup-batch.clp</span>

<span class="p">(</span><span class="nv">printout</span><span class="w"> </span><span class="nv">yellow</span><span class="w"> </span><span class="s">&quot;cleanup batch&quot;</span><span class="w"> </span><span class="nv">crlf</span><span class="p">)</span>
<span class="p">(</span><span class="nv">undefrule</span><span class="w"> </span><span class="nv">hello-world</span><span class="p">)</span>
<span class="p">(</span><span class="nv">undefrule</span><span class="w"> </span><span class="nv">goodbye-world</span><span class="p">)</span>
<span class="p">(</span><span class="nv">do-for-all-facts</span><span class="w"> </span><span class="p">((</span><span class="nv">?h</span><span class="w"> </span><span class="nv">hello</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nv">retract</span><span class="w"> </span><span class="nv">?h</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="config_plugin.html" class="btn btn-neutral float-left" title="YAML Configuration Plugin" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="protobuf_plugin.html" class="btn btn-neutral float-right" title="Protobuf Plugin" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Tarik Viehmann.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>