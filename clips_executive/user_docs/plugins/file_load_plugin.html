<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>File Load Plugin &mdash; clips_executive 0.1.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> clips_executive
          </a>
              <div class="version">
                0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">ROS 2 Clips-Executive</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fundamentals/index.html">Fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins/index.html">CLIPS Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugin_generator/index.html">ROS Interface Plugin Generator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">clips_executive</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>File Load Plugin</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/user_docs/plugins/file_load_plugin.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="file-load-plugin">
<h1>File Load Plugin<a class="headerlink" href="#file-load-plugin" title="Permalink to this headline"></a></h1>
<p>Source code on <a class="reference external" href="https://github.com/fawkesrobotics/ros2-clips-executive/blob/master/cx_plugins/file_load_plugin">GitHub</a>.</p>
<div class="admonition-plugin-class admonition">
<p class="admonition-title">Plugin Class</p>
<p>cx::FileLoadPlugin</p>
</div>
<p>This plugin provides the ability to load files into CLIPS using <code class="docutils literal notranslate"><span class="pre">batch*</span></code> and <code class="docutils literal notranslate"><span class="pre">load*</span></code> through configuration values.</p>
<section id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline"></a></h2>
<dl class="field-list">
<dt class="field-odd"><cite>pkg_share_dirs</cite></dt>
<dd class="field-odd"><table class="docutils align-default">
<colgroup>
<col style="width: 65%" />
<col style="width: 35%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Type</p></td>
<td><p>Default</p></td>
</tr>
<tr class="row-even"><td><p>string vector</p></td>
<td><p>[]</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>Description</dt><dd><p>When specifying relative paths, look at the share directories of the listed packages to resolve them (in the specified order).</p>
</dd>
</dl>
</dd>
<dt class="field-even"><cite>load</cite></dt>
<dd class="field-even"><table class="docutils align-default">
<colgroup>
<col style="width: 65%" />
<col style="width: 35%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Type</p></td>
<td><p>Default</p></td>
</tr>
<tr class="row-even"><td><p>string vector</p></td>
<td><p>[]</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>Description</dt><dd><p>Specify files to load using CLIPS load* command when the plugin is loaded.
Supports absolute paths or relative paths using the share directories specified above.</p>
</dd>
</dl>
</dd>
<dt class="field-odd"><cite>batch</cite></dt>
<dd class="field-odd"><table class="docutils align-default">
<colgroup>
<col style="width: 65%" />
<col style="width: 35%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Type</p></td>
<td><p>Default</p></td>
</tr>
<tr class="row-even"><td><p>string vector</p></td>
<td><p>[]</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>Description</dt><dd><p>Specify files to load using CLIPS batch* command when the plugin is loaded. This happens after the files specified in <code class="docutils literal notranslate"><span class="pre">load</span></code> are loaded.
Supports absolute paths or relative paths using the share directories specified above.</p>
</dd>
</dl>
</dd>
<dt class="field-even"><cite>clenaup_batch</cite></dt>
<dd class="field-even"><table class="docutils align-default">
<colgroup>
<col style="width: 65%" />
<col style="width: 35%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Type</p></td>
<td><p>Default</p></td>
</tr>
<tr class="row-even"><td><p>string vector</p></td>
<td><p>[]</p></td>
</tr>
</tbody>
</table>
<dl class="simple">
<dt>Description</dt><dd><p>Specify files to load using CLIPS batch* command when the plugin is unloaded.
This may be used to clean up all loaded content to gracefully undo whatever was loaded in before.
Supports absolute paths or relative paths using the share directories specified above.</p>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline"></a></h2>
<p>This plugin injects the user-defined code into the CLIPS environments and has no other effects.</p>
<p>For the difference between <code class="docutils literal notranslate"><span class="pre">load*</span></code> and <code class="docutils literal notranslate"><span class="pre">batch*</span></code> please consult the CLIPS <a class="reference external" href="https://clipsrules.net/documentation/v641/bpg641.pdf">Basic Programming Guide (PDF)</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended to use load over batch whenever possible due to the superior error handling of load.
E.g., when using batch, a missing closing parenthesis <code class="docutils literal notranslate"><span class="pre">)</span></code>  may lead to a silent faliure as CLIPS treats this as an uncompleted command and waits for another closing parenthesis to appear before actually processing the input.</p>
</div>
</section>
<section id="usage-example">
<h2>Usage Example<a class="headerlink" href="#usage-example" title="Permalink to this headline"></a></h2>
<p>A minimal working example is provided by the <a class="reference external" href="https://fawkesrobotics.github.io/ros2-clips-executive/cx_bringup">cx_bringup</a> package. Run it via:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 launch cx_bringup cx_launch.py manager_config:<span class="o">=</span>plugin_examples/file_load.yaml
</pre></div>
</div>
<section id="id1">
<h3>Configuration<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h3>
<p>File <a class="reference external" href="https://github.com/fawkesrobotics/ros2-clips-executive/blob/master/cx_bringup/params/plugin_examples/file_load.yaml">cx_bringup/params/plugin_examples/file_load.yaml</a>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">clips_manager</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">ros__parameters</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">environments</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;cx_file_load&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">    </span><span class="nt">cx_file_load</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">plugins</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;files&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">      </span><span class="nt">watch</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;facts&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;rules&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>

<span class="w">    </span><span class="nt">files</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">plugin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;cx::FileLoadPlugin&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">pkg_share_dirs</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;cx_bringup&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">      </span><span class="nt">load</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;clips/plugin_examples/file-load.clp&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">      </span><span class="nt">batch</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;clips/plugin_examples/file-load-batch.clp&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">      </span><span class="nt">cleanup_batch</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;clips/plugin_examples/file-load-cleanup-batch.clp&quot;</span><span class="p p-Indicator">]</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="code">
<h3>Code<a class="headerlink" href="#code" title="Permalink to this headline"></a></h3>
<p>File <a class="reference external" href="https://github.com/fawkesrobotics/ros2-clips-executive/blob/master/cx_bringup/clips/plugin_examples/file-load.clp">cx_bringup/clips/plugin_examples/file-load.clp</a>.</p>
<div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nv">defrule</span> <span class="nv">hello-world</span>
   <span class="p">(</span><span class="nb">not</span> <span class="p">(</span><span class="nv">hello</span><span class="p">))</span>
   <span class="nv">=&gt;</span>
   <span class="p">(</span><span class="nv">printout</span> <span class="nv">green</span> <span class="s">&quot;Hello world&quot;</span> <span class="nv">crlf</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">assert</span> <span class="p">(</span><span class="nv">hello</span><span class="p">))</span>
<span class="p">)</span>
<span class="p">(</span><span class="nv">defrule</span> <span class="nv">goodbye-world</span>
   <span class="p">(</span><span class="nv">executive-finalize</span><span class="p">)</span>
   <span class="nv">=&gt;</span>
   <span class="p">(</span><span class="nv">printout</span> <span class="nv">blue</span> <span class="s">&quot;Goodbye world&quot;</span> <span class="nv">crlf</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
<p>File <a class="reference external" href="https://github.com/fawkesrobotics/ros2-clips-executive/blob/master/cx_bringup/clips/plugin_examples/file-load-batch.clp">cx_bringup/clips/plugin_examples/file-load-batch.clp</a>.</p>
<div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nv">printout</span> <span class="nv">yellow</span> <span class="s">&quot;batch&quot;</span> <span class="nv">crlf</span><span class="p">)</span>
</pre></div>
</div>
<p>File <a class="reference external" href="https://github.com/fawkesrobotics/ros2-clips-executive/blob/master/cx_bringup/clips/plugin_examples/file-load-cleanup-batch.clp">cx_bringup/clips/plugin_examples/file-load-cleanup-batch.clp</a>.</p>
<div class="highlight-lisp notranslate"><div class="highlight"><pre><span></span><span class="c1">; file-load-cleanup-batch.clp</span>

<span class="p">(</span><span class="nv">printout</span> <span class="nv">yellow</span> <span class="s">&quot;cleanup batch&quot;</span> <span class="nv">crlf</span><span class="p">)</span>
<span class="p">(</span><span class="nv">undefrule</span> <span class="nv">hello-world</span><span class="p">)</span>
<span class="p">(</span><span class="nv">undefrule</span> <span class="nv">goodbye-world</span><span class="p">)</span>
<span class="p">(</span><span class="nv">do-for-all-facts</span> <span class="p">((</span><span class="nv">?h</span> <span class="nv">hello</span><span class="p">))</span>
  <span class="p">(</span><span class="nv">retract</span> <span class="nv">?h</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Tarik Viehmann.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>